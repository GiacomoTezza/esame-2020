!function(t){"use strict";t.fn.dynamitable=function(e){var n=this,i=new function(t){this.getIndex=function(t){return t.parents("tr").children("td, th").index(t)},this.getBody=function(){return t.find("tbody")},this.getRows=function(){return this.getBody().children("tr")},this.getField=function(t,e){return e.children("td, th").eq(t)},this.getValue=function(t,e){return this.getField(t,e).text()}}(t(this));return this.filterList=[],this.displayAll=function(){return i.getRows().each(function(){t(this).show()}),this},this.filter=function(e,n){var r=new RegExp(n,"i");return i.getRows().each(function(){!0!==r.test(i.getValue(e,t(this)))&&t(this).hide()}),this},this.addFilter=function(e){n.filterList.push(e);var r=function(){n.displayAll(),t(n.filterList).each(function(e,r){t(n).find(r).each(function(){var e=t(this);n.filter(i.getIndex(e.parent("td, th")),e.val())})})};return t(e).on("change keyup keydown",r),r(),this},this.addSorter=function(e,r){return t(n).find(e).each(function(){var e=t(this),s=i.getIndex(e.parent("td, th"));e.on("click",function(){n.sorter(s,r)})}),this},this.sorter=function(e,n){return i.getBody().append(i.getRows().detach().sort(function(r,s){var d=i.getValue(e,t(r)),a=i.getValue(e,t(s)),c="desc"===n?!0:!1;return""!==d.replace(/[^\d-]/g,"")&&""!==a.replace(/[^\d-]/g,"")&&(d=parseFloat(d.replace(/[^\d,.-]/g,"")),a=parseFloat(a.replace(/[^\d,.-]/g,""))),d===a?0:d>a?c?1:-1:c?-1:1})),this},this},t(document).find(".js-dynamitable").each(function(){t(this).dynamitable().addFilter(".js-filter").addSorter(".js-sorter-asc","asc").addSorter(".js-sorter-desc","desc")})}(jQuery);